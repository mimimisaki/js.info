<!DOCTYPE html>
<html>
  <body>
    <p>Before the acript...</p>

    <script>
      let arr = [1, 2, 3];

      function shuffle(x) {
        x.sort(() => Math.random() - 0.5);
      }

      shuffle(arr);
      // arr = [3, 2, 1]

      shuffle(arr);
      // arr = [2, 1, 3]

      shuffle(arr);
      // arr = [3, 1, 2]
      // ...

      let count = {
        123: 0,
        132: 0,
        213: 0,
        231: 0,
        321: 0,
        312: 0,
      };

      for (let i = 0; i < 1000000; i++) {
        let array = [1, 2, 3];
        shuffle(array);
        count[array.join("")]++;
      }

      // 結果を表示します
      for (let key in count) {
        alert(`${key}: ${count[key]}`);
      }

      // ↓ Fisher-Yates shuffle
      function fisherShuffle(x) {
        for (let i = x.length - 1; i > 0; i--) {
          let j = Math.floor(Math.random() * (i + 1));
          [x[i], x[j]] = [x[j], x[i]];
        }
      }
      let fisherCount = {
        123: 0,
        132: 0,
        213: 0,
        231: 0,
        321: 0,
        312: 0,
      };

      for (let i = 0; i < 1000000; i++) {
        let array = [1, 2, 3];
        fisherShuffle(array);
        fisherCount[array.join("")]++;
      }

      // show counts of all possible permutations
      for (let key in fisherCount) {
        alert(`${key}: ${fisherCount[key]}`);
      }
    </script>

    <p>...After the script.</p>
  </body>
</html>
